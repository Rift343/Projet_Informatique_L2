<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <link rel="stylesheet" href="static/main.css">
  <link rel="stylesheet" href="static/main.css">
  <script></script>
  <title>Commande</title>
  <script type="text/javascript">
  var rep_li = [];
  function get_responses(){
    li_bonne_rep = document.getElementById("numero_load").innerHTML.split(",");
    for (element in li_bonne_rep){
        li_bonne_rep[element] = li_bonne_rep[element].replace(/\D/g,'');
    }
    return li_bonne_rep;
    }
  function chargement(){
      li_rep_exit = document.getElementsByClassName("reponses_a_charge");
        nb= 0;
      for (element in li_rep_exit){
          if(typeof li_rep_exit[element].innerHTML !== 'undefined'){
          rep_li.push(li_rep_exit[element].innerHTML);
          console.log(li_rep_exit[element].innerHTML);console.log(li_rep_exit[element]);nb++;}
          
      }
      document.getElementById('li_rep_possibles').value=""+rep_li.join(";");
      document.getElementById('nb_rep_possibles').value=nb;
      console.log(get_responses());
  }
  function ajout_rep(){
    txt =document.getElementById('nrep').value;


    rep_li.push(txt);
    //console.log(rep_li)
    document.getElementById('li_rep_possibles').value=""+rep_li.join(";");
    
    num = 0
    document.getElementById('rep_possibles').innerHTML ="";
    for(element in rep_li){
        document.getElementById('rep_possibles').innerHTML = document.getElementById("rep_possibles").innerHTML + 
        ' <span id = "rep_en_cours"> <input type="checkbox" id="'+num +'" name="'+num +'">'+rep_li[element]+'<input type="button" name="suprep" id="suprep" onclick="supp_rep('+num+')" value="Supprimer !"> </span><br>';
        num=num+1;
    }
    document.getElementById('nb_rep_possibles').value=num;
  }
  function supp_rep(n){
      rep_li.splice(n,1);
      num = 0;
    document.getElementById('rep_possibles').innerHTML ="";
    for(element in rep_li){
        document.getElementById('rep_possibles').innerHTML = document.getElementById("rep_possibles").innerHTML + 
        ' <span id = "rep_en_cours"> <input type="checkbox" id="'+num +'" name="'+num +'">'+rep_li[element]+'<input type="button" name="suprep" id="suprep" onclick="supp_rep('+num+')" value="Supprimer !"> </span><br>';
        num=num+1;
    }
    document.getElementById('nb_rep_possibles').value=num;
  }
  </script>
</head>
<body onload="chargement()">
<div id="top">Createur de question en ligne</div>
<div id="mid"><br><form action="" method="post">
    <div class="entree">
        <label for="enonce">Entrer l'enonce de votre question : </label>
        <textarea name="enonce" id="enonce" value='{{dictionnaire["Question"]}}' required></textarea>
    </div>
    
    <div class="entree">
        <label for="etiquettes">Entrer la/les etiquettes de votre question (séparé par des ";") : </label>
        <input type="text" name="etiquettes" id="etiquettes" value='{% for eti in dictionnaire["ET"]: %}{{eti+";"}}{%endfor%}'>
    </div>

    
    <div class="entree">
        <label for="nouvelle_rep">Entrer une reponse et cliquez sur ajouter : </label>
        <input type="text" name="nrep" id="nrep">

        <input type="button" name="ajoutrep" id="ajoutrep" onclick="ajout_rep()" value="Ajouter !"> <BR>Cochez la/les reponses !
    </div>
    <div id = "rep_possibles">{% set num = 0 %}
    {% for rep in dictionnaire["REP"]: %}<span id = "rep_en_cours"> <input type="checkbox"  id="{{ loop.index-1 }}" name="{{ loop.index-1 }}"><span class="reponses_a_charge">{{rep}}</span><input type="button" name="suprep" id="suprep" onclick="supp_rep('+num+')" value="Supprimer !"> </span><br>{% set num = num + 1 %}{%endfor%}
    </div>        
    <input type="text" name="li_rep_possibles" id="li_rep_possibles" hidden>
        <input type="number" name="nb_rep_possibles" id="nb_rep_possibles" hidden><br>
    <input type="submit" name="submit" id="submit" value ="Ajouter la question !">
</form><br><br><span id="numero_load">{{dictionnaire["BREP"]}}</span></div>
<div id="bot">
<a href="./">Acceuil</a>
<a href="./register">S'enregistrer</a>
<a href="./login">Se connecter</a>
<a href="./creationQuestion">Creer une question</a>
<a href="./BDD">Liste de vos questions</a>
<a href="./creerfeuille">Creer une feuille d'exercice</a>
</div>
</body>

</html>