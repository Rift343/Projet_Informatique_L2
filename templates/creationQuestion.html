<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <link rel="stylesheet" href="static/main.css"><link rel="stylesheet" href="static/creationQuestion.css">
  <script></script>
  <title>Commande</title>
  <script type="text/javascript">
  var rep_li = [];
  
  function ajout_rep(){
    txt =document.getElementById('nrep').value
    console.log(txt);
    document.getElementById("btnsubmit").removeAttribute("hidden");


    rep_li.push(txt);
    //console.log(rep_li)
    document.getElementById('li_rep_possibles').value=""+rep_li.join(";");
    //console.log(rep_li.join(";"));
    num = 0
    document.getElementById('rep_possibles').innerHTML ="";
    for(element in rep_li){
        document.getElementById('rep_possibles').innerHTML = document.getElementById("rep_possibles").innerHTML + 
        ' <span id = "rep_en_cours" style="border-radius: 25px; background: #d80b0b; padding: 6px; min-width: 10%; min-height: 25px; margin: 6px;display: inline-block;"> <input type="checkbox" id="'+num +'" name="'+num +'" onclick=changerCouleurRep(this)><span id="spanInte">'+rep_li[element].replace(/\n/g, "<BR>")+'</span><input type="button" name="suprep" id="suprep" onclick="supp_rep('+num+')" value="Supprimer !" style="display: block; margin-left: auto; margin-right: 0;"> </span>';
        num=num+1;
    }
    document.getElementById('nb_rep_possibles').value=num;
  }
  function supp_rep(n){
    rep_li.splice(n,n);
    num = 0;
    document.getElementById('li_rep_possibles').value=""+rep_li.join(";");
    document.getElementById('rep_possibles').innerHTML ="";
    for(element in rep_li){
        document.getElementById('rep_possibles').innerHTML = document.getElementById("rep_possibles").innerHTML + 
        ' <span id = "rep_en_cours" style="border-radius: 25px; background: #d80b0b; padding: 6px; min-width: 10%; min-height: 25px; margin: 6px;display: inline-block;"> <input type="checkbox" id="'+num +'" name="'+num +'" onclick=changerCouleurRep(this)><span id="spanInte">'+rep_li[element].replace(/\n/g, "<BR>")+'</span><input type="button" name="suprep" id="suprep" onclick="supp_rep('+num+')" value="Supprimer !" style="display: block; margin-left: auto; margin-right: 0;"> </span>';
        num=num+1;
    }
    document.getElementById('nb_rep_possibles').value=num;
  }
  
  
    function visualisation_iframe() {
    var form = document.getElementById("formulaire");
    form.target = 'iframe_visu';
    form.action = './visuIFrame';
    document.getElementById("iframe_visu").removeAttribute("hidden");
    form.submit();
    form.target = "";
    form.action = "";
}
function changerCouleurRep(ele){
    if(ele.checked == true){
        ele.parentElement.style="border-radius: 25px; background: #29c003; padding: 6px; min-width: 10%; min-height: 25px; margin: 6px;display: inline-block;"
    }
    else{
        ele.parentElement.style="border-radius: 25px; background: #d80b0b; padding: 6px; min-width: 10%; min-height: 25px; margin: 6px;display: inline-block;"
    }


    
}
  </script>
</head>
<body>
    <div class="nom">NomDuSite</div>
    <ul class="menu">
        <li>
            Invité
            <ul class="sousMenu">
                <li><a href="/">Accueil</a></li>
                <li><a href="BDD">Liste de vos questions</a></li>
                <li><a href="creationQuestion">Créer une question</a></li>
                <li><a href="creationFeuille">Créer une feuille d'exercices</a></li>
            </ul>
        </li>
    </ul>
<div id="mid"><br><form id="formulaire" action="" method="post">
    <div class="entree">
        <label for="enonce">Entrer l'enonce de votre question : </label>
        <textarea name="enonce" id="enonce" required></textarea>
    </div>
    
    <div class="entree">
        <label for="etiquettes">Entrer la/les etiquettes de votre question (séparé par des ";") : </label>
        <input type="text" name="etiquettes" id="etiquettes">
    </div>

    
    <div class="entree">
        <label for="nouvelle_rep">Entrer une reponse et cliquez sur ajouter : </label>
        <textarea name="nrep" id="nrep"></textarea>
        <textarea name="li_rep_possibles" id="li_rep_possibles" hidden></textarea>
        <input type="number" name="nb_rep_possibles" id="nb_rep_possibles" hidden>
        <input type="button" name="ajoutrep" id="ajoutrep" onclick="ajout_rep()" value="Ajouter !"> <BR>Cochez la/les bonnes reponses !
    </div>
    <div id = "rep_possibles">
    </div><br>
    <input type="submit" name="btnsubmit" id="btnsubmit" value ="Ajouter la question !" hidden>
    <input type="button" name="visu" id="visu" value ="Visualiser l'enonce de la question !" onclick="visualisation_iframe()">
    <iframe name="iframe_visu" src="" id="iframe_visu" width="750" height="600" style="position: fixed;
    top: 100px;
    right: 150px;" hidden></iframe>
</form><br><br></div>
<div id="bot">
<a href="./">Acceuil</a>
<a href="./register">S'enregistrer</a>
<a href="./login">Se connecter</a>
<a href="./creationQuestion">Creer une question</a>
<a href="./BDD">Liste de vos questions</a>
<a href="./creationFeuille">Creer une feuille d'exercice</a>
</div>
</body>

</html>